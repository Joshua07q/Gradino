<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Grad-ino</title>

     <style>
      h1{
        color: hsl(227, 67%, 83%);
      }
       
        body{
          background-image : linear-gradient(to right, #e33f5e,#779ecc,#25268f,#4a58cf,#115e20,#3eacb8,#bdc984,#59a7f5,#ae3bf3,#849531,#d709bd,#9503c4,#b23a15,#63633b,#1a1a59,#2f1fe0,#fe0e10,#ba6fb4,#cf29f8,#d66a8e);
           background-size: 100% 2px;
           background-position: 0% 100%;
            height: 2px;
            color: hsl(0, 0%, 22%);
            color: rgb(65, 65, 65)
        }
#ccc{
    position: absolute;
    left: 250px;
    top: 100px;
    width: 500px;
    height: 450px;
    align-items: center;
    text-align: center;
    z-index: 100000000000000;
    border: 0.5px solid #ccc;
    background-color: white;
}
.converter{
  position: absolute;
  top: 100px;
  left: 20%;
}
#output{
  position: absolute;
  top: 220px;
  left: 20%;
  text-align: left;
}
  
     </style>
</head>    
   
<body>
    <div id="ccc">
      <div class="converter">
        <h1>Color Code Converter</h1>
        <input id="color-code" placeholder="Enter Color Code..." type="text">
        <select name="" id="format">
            <option value="hex">HEX</option>
            <option value="rgb">RGB</option>
            <option value="hsl">HSL</option>
        </select>
        <button id="convert-btn">Convert</button>
      </div>
        <div id="output"></div>
    </div>
    <script>
        const convertBtn = document.getElementById("convert-btn");
           const colorInput = document.getElementById("color-code");
           const formatSelect = document.getElementById("format");
           const outputDiv = document.getElementById("output");

           convertBtn.addEventListener("click",()=>{

            const color = colorInput.value;
            const format = formatSelect.value;
             let output;
            switch(format){
                case "hex":
                 output = `<div>
                  <span> Hex: ${color}</span><div style="background-color: ${color};width:30px; height: 30px;"></div><br/>
                  <span> RGB: ${hexToRgb(color)}</span><div style="background-color: ${hexToRgb(color)};width:30px; height: 30px;"></div><br/>
                  <span> HSL: ${hexToHsl(color)}</span><div style="background-color: ${hexToHsl(color)};width:30px; height: 30px;"></div><br/>
                  `;
                   
                    break;
                case "rgb":
                output = `<div>
                  <span> Hex: ${rgbToHex(color)}</span><div style="background-color: ${rgbToHex(color)};width:30px; height: 30px;"></div><br/>
                  <span> RGB: rgb(${color})</span><div style="background-color: rgb(${color});width:30px; height: 30px;"></div><br/>
                  <span> HSL: ${rgbToHsl(color)}</span><div style="background-color: ${rgbToHsl(color)};width:30px; height: 30px;"></div><br/>
                `
                   
                    break;
                case "hsl":
                output = `<div>
                  <span> Hex: ${hslToHex(color)}</span><div style="background-color: ${hslToHex(color)};width:30px; height: 30px;"></div><br/>
                  <span> RGB: ${hslToRgb(color)}</span><div style="background-color: ${hslToRgb(color)};width:30px; height: 30px;"></div><br/>
                  <span> HSL: hsl(${color})</span><div style="background-color: hsl(${color});width:30px; height: 30px;"></span><br/>
                  `;
                   break;
            }
            outputDiv.innerHTML = output;
           });
             function hexToRgb(hex){
                 const r = parseInt(hex.slice(1,3),16);
                 const g = parseInt(hex.slice(3,5),16);
                 const b = parseInt(hex.slice(5,7),16);
              return `rgb(${r},${g},${b})`;
             }
                 
             function hexToHsl(hex){
              const r = parseInt(hex.slice(1,3),16)/255.0;
              const g = parseInt(hex.slice(3,5),16)/255.0;
              const b = parseInt(hex.slice(5,7),16)/255.0;
              const maxNum = Math.max(r, g, b);
                const minNum = Math.min(r, g, b);
                const diff = maxNum - minNum;
                const epilson = 1e-6;
                  let h, s, l;
              if(maxNum === minNum){
                h = 0;
              }else{
                if(maxNum === r){
                  h = (60*(g - b)/diff)%360;
                }else if(maxNum === g){
                  h = (60*(b - r)/diff)+ 120;
                }else {
                   h = (60*(r - g)/diff) + 240;
                }
              }
              if(maxNum === 0){
                s = 0;
              }else{
                s = (maxNum - minNum)/(maxNum);
              }
              l = (maxNum + minNum)/2;
              h = Math.round(h);
              s = parseFloat(s.toFixed(2));
              l = parseFloat(l.toFixed(2));
              return `hsl(${h},${s * 100}%, ${l * 100}%)`;
             }
           
            function rgbToHsl(rgb){  
            const hex = rgbToHex(rgb);
               const hsl = hexToHsl(hex);
              return hsl;

          }

            function rgbToHex(rgb){
              const [r, g,b] = rgb.split(',').map(Number);
              const hexR = Math.round(r).toString(16).padStart(2, '0');
              const hexG = Math.round(g).toString(16).padStart(2, '0');
              const hexB = Math.round(b).toString(16).padStart(2, '0');

              return `#${hexR}${hexG}${hexB}`;

            }
            function hslToRgb(hsl){
             let [h,s,l] = hsl;
             h /= 360;
             s /=100;
             l /= 100;
              let r, g, b ;
              if(s === 0){
                r = g = b =l;
              }else{
                const q = l<0?l*(1 + s): l + s - l*s;
                const p = 2*l -q;
                 r = hueToRgb(p, q, h + 1/3);
                 g = hueToRgb(p, q, h);
                 b = hueToRgb(p,q, h -1/3);
              }
            
                return `rgb(${ Math.round(r*255)},
                 ${Math.round(g*255)}, ${Math.round(b*255)})`;
            }
            function hslToHex(hsl){
              const rgb = hslToRgb(hsl);
              const hex = rgbToHex(rgb);
              return hex;
            }
         
            const hueToRgb = (p, q, t)=>{
                  if(t < 0) t += 1;
                  if(t > 1) t -= 1;
                  if(t < 1/6) return p + (q - p)* 6*t;
                  if(t < 1/2) return q;
                  if(t < 2/3) return p + (q -p)*6*(2/3 - t);
                  return p;
                  if(isNaN(t)|| t<0||t>1){
                    console.error("Quanck",t);
                    return undefined;
                  }
            }
    </script>
</body>
</html>